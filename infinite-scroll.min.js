!function(a){a.infiniteScroll=function(b,c){function p(b){var c=a(b);k.timeout>0?setTimeout(function(){q(c)},k.timeout):q(c),i.iteration++}function q(b){a.isFunction(k.insert)?k.insert(d,b):d.append(b),a.isFunction(k.afterInsert)&&k.afterInsert(),u(),o.on("scroll.infiniteScroll",t),j.allowedToScroll=!0}function r(){var b;if(j.allowedToScroll=!1,f.off("scroll.infiniteScroll"),a.isFunction(k.beforeAjax)&&k.beforeAjax(m),"undefined"==typeof n)throw new Error('Please define ajax by calling "setAjax()"');b=a.ajax(n),b.done(function(b,c){"success"==c&&(a.isFunction(k.onAjaxSuccess)&&k.onAjaxSuccess(m),p(b))})}function s(){o.on("scroll.infiniteScroll",t),o.on("resize.infiniteScroll",u)}function t(){return j.allowedToScroll?(o.scrollTop()>=i.scrollOffset&&r(),void 0):!1}function u(){i.scrollOffset=d.height()-o.height(),i.scrollOffset-=k.threshold}function v(a){n=a}function w(){return l===!1&&(k=a.extend({},h,c),o=k.scroller,u(),m={settings:k,properties:i,setAjax:v},a.isFunction(k.onInit)&&k.onInit(k),k.loadOnInit&&r(),s(),l=!0),m}var k,m,n,o,d=a(b),f=a(window),h=(a(document),{loadOnInit:!0,scroller:a(window),threshold:200,timeout:200,insert:null,onInit:null,beforeAjax:null,onAjaxSuccess:null,afterInsert:null}),i={iteration:1,scrollOffset:0},j={allowedToScroll:!0},l=!1;return w()},a.fn.infiniteScroll=function(b){return this.each(function(){if("undefined"==typeof a(this).data("infiniteScroll")){var c=new a.infiniteScroll(this,b);a(this).data("infiniteScroll",c)}})}}(jQuery||Zepto);